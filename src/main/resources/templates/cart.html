<!DOCTYPE html>
<html lang="hu" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Kosár</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

	<style>
		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background-color: #fefefe;
			color: #333;
			line-height: 1.6;
			min-height: 100vh;
			padding-top: 70px;
		}

		#navbar {
			background-color: #dcbbb3;
			width: 100%;
			padding: 15px 0;
			position: fixed;
			top: 0;
			left: 0;
			z-index: 1000;
		}

		nav {
			max-width: 900px;
			margin: 0 auto;
			text-align: center;
		}

		nav a {
			margin: 0 20px;
			text-decoration: none;
			color: white;
			font-weight: 600;
			font-size: 1.1rem;
			transition: color 0.3s ease;
		}

		nav a:hover, nav a:focus {
			color: #f0d6db;
			outline: none;
		}

		main {
			max-width: 900px;
			margin: 0 auto;
			padding: 20px 15px;
		}

		h1 {
			color: #4d4d4d;
			margin-bottom: 25px;
			font-weight: 700;
			font-size: 2rem;
			letter-spacing: 0.05em;
			text-align: center;
		}

		.table thead th {
			background-color: #fce4e8;
			color: #b40061;
		}

		.btn-remove {
			background-color: transparent;
			border: none;
			color: #b40061;
			font-size: 1.2rem;
			cursor: pointer;
			transition: color 0.3s ease;
		}

		.btn-remove:hover {
			color: #7a002f;
		}

		.total-row {
			font-weight: 700;
			font-size: 1.25rem;
			color: #b40061;
		}
	</style>
</head>
<body>

<div id="navbar">
	<nav>
		<a href="/">Kezdőlap</a>
		<a href="/termekek-oldal">Termékek</a>
		<a href="/kapcsolat">Kapcsolat</a>
		<a href="/kosar">Kosár</a>
		<a href="/login">Bejelentkezés</a>
	</nav>
</div>

<main>
	<h1>Kosár</h1>

	<table class="table table-hover align-middle">
		<thead>
		<tr>
			<th>Termék</th>
			<th>Egységár</th>
			<th>Mennyiség</th>
			<th>Összesen</th>
			<th>Művelet</th>
		</tr>
		</thead>
		<tbody>
		<tr th:each="item : ${cart.items}">
			<td>
				<img th:src="@{'/images/products/' + ${item.product.imageFile}}"
						 alt="Termék képse"
						 class="img-thumbnail"
						 style="width: 60px; height: 60px; object-fit: contain;"/>
				<span th:text="${item.product.name}">Termék neve</span>
			</td>
			<td th:text="${item.unitPrice} + ' Ft'">1000 Ft</td>
			<td>
				<form th:action="@{/kosar/modosit/{productId}(productId=${item.product.id})}" method="post" onchange="this.form.submit()" class="d-flex align-items-center gap-2 mt-3">
					<input type="number" name="quantity" min="1" th:value="${item.quantity}" class="form-control" style="width: 80px;" />
				</form>
			</td>
			<td th:text="${item.totalPrice} + ' Ft'">1000 Ft</td>
			<td>
				<form th:action="@{/kosar/torol/{productId}(productId=${item.product.id})}" method="post" style="display:inline;">
					<button type="submit" class="btn-remove" title="Törlés">❌</button>
				</form>
			</td>
		</tr>
		</tbody>
		<tfoot>
		<tr class="total-row">
			<td colspan="3" class="text-end">Végösszeg:</td>
			<td th:text="${totalPrice} + ' Ft'">0 Ft</td>
			<td></td>
		</tr>
		</tfoot>
	</table>

	<div class="text-center mt-4">
		<a href="/termekek-oldal" class="btn btn-outline-danger">⬅ Vissza a termékekhez</a>
		<a href="/megrendeles" class="btn btn-danger ms-3">Megrendelés</a>
	</div>
</main>

</body>
</html>

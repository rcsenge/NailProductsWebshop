<!DOCTYPE html>
<html lang="hu" xmlns:th="http://www.thymeleaf.org" data-theme="cupcake">
<head>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Kosár</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="icon" href="/images/icon/favicon.png" type="image/jpeg">
	<link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css"/>
	<link href="/css/styles.css" rel="stylesheet" type="text/css"/>
	<style>
		.cart-card {
			background-color: white;
			border: 1px solid rgba(200, 150, 156, 0.15);
			box-shadow: 0 2px 12px rgba(200, 150, 156, 0.08);
		}

		.cart-item {
			background-color: white;
			border: 1px solid rgba(200, 150, 156, 0.15);
			transition: all 0.3s ease;
			box-shadow: 0 2px 8px rgba(200, 150, 156, 0.05);
		}

		.cart-item:hover {
			box-shadow: 0 4px 16px rgba(200, 150, 156, 0.12);
		}

		.price-tag {
			color: var(--accent-color);
			font-weight: 600;
		}

		.btn-outline-primary {
			border-color: var(--accent-color);
			color: var(--accent-color);
		}

		.btn-outline-primary:hover {
			background-color: var(--accent-color);
			border-color: var(--accent-color);
			color: white;
		}

		.btn-remove {
			background-color: transparent;
			border: 1px solid rgba(239, 68, 68, 0.3);
			color: #ef4444;
			transition: all 0.3s ease;
		}

		.btn-remove:hover {
			background-color: #ef4444;
			border-color: #ef4444;
			color: white;
			transform: scale(1.05);
		}

		.input:focus, .select:focus {
			border-color: var(--accent-color);
			box-shadow: 0 0 0 2px rgba(200, 150, 156, 0.1);
		}

		.title-decoration {
			width: 60px;
			height: 2px;
			background-color: var(--accent-color);
			margin: 0 auto;
			opacity: 0.7;
		}

		.quantity-input {
			border: 1px solid rgba(200, 150, 156, 0.2);
			border-radius: 6px;
			transition: all 0.3s ease;
		}

		.quantity-input:focus {
			border-color: var(--accent-color);
			box-shadow: 0 0 0 2px rgba(200, 150, 156, 0.1);
		}

		.total-summary {
			background: linear-gradient(135deg, var(--pale-pink) 0%, white 100%);
			border: 1px solid rgba(200, 150, 156, 0.15);
		}

		.empty-cart {
			background-color: white;
			border: 1px solid rgba(200, 150, 156, 0.15);
			box-shadow: 0 2px 12px rgba(200, 150, 156, 0.08);
		}

		.product-image {
			border-radius: 8px;
			transition: transform 0.3s ease;
		}

		.cart-item:hover .product-image {
			transform: scale(1.02);
		}

		@media (max-width: 768px) {
			.cart-item {
				padding: 1rem;
			}
		}
	</style>
</head>
<body class="min-h-screen">
<div class="navbar custom-navbar fixed top-0 z-50 px-4">
	<div class="navbar-center mx-auto max-w-4xl flex gap-1">
		<a href="/" class="btn btn-ghost">Kezdőlap</a>
		<a href="/termekek-oldal" class="btn btn-ghost">Termékek</a>
		<a href="/kapcsolat" class="btn btn-ghost">Kapcsolat</a>
		<a href="/kosar" class="btn btn-ghost">Kosár</a>
		<a href="/auth/bejelentkezes" class="btn btn-ghost">Bejelentkezés</a>
	</div>
</div>

<main class="pt-24 pb-12 px-4">
	<div class="max-w-6xl mx-auto">
		<div class="text-center mb-12">
			<h1 class="text-4xl md:text-5xl font-bold hero-title mb-4">
				Kosár
			</h1>
			<div class="title-decoration"></div>
		</div>

		<div>
			<div class="hidden lg:block cart-card rounded-xl overflow-hidden mb-8">
				<div class="overflow-x-auto">
					<table class="table w-full">
						<thead class="bg-gradient-to-r from-orange-50 to-pink-50">
						<tr>
							<th class="text-left py-4 px-6 font-semibold text-gray-700">Termék</th>
							<th class="text-center py-4 px-4 font-semibold text-gray-700">Egységár</th>
							<th class="text-center py-4 px-4 font-semibold text-gray-700">Mennyiség</th>
							<th class="text-center py-4 px-4 font-semibold text-gray-700">Összesen</th>
							<th class="text-center py-4 px-4 font-semibold text-gray-700">Művelet</th>
						</tr>
						</thead>
						<tbody>
						<tr th:each="item : ${cart.items}" class="border-t border-gray-100 hover:bg-gray-50">
							<td class="py-4 px-6">
								<div class="flex items-center gap-4">
									<img th:src="@{'/images/products/' + ${item.product.imageFile}}"
											 alt="Termék képe"
											 class="product-image w-16 h-16 object-cover"/>
									<div>
										<h3 class="font-medium text-gray-900" th:text="${item.product.name}">Termék neve</h3>
									</div>
								</div>
							</td>
							<td class="text-center py-4 px-4">
								<span class="price-tag text-lg" th:text="${item.unitPrice}">1000</span>
								<span class="text-sm text-gray-500 ml-1">Ft</span>
							</td>
							<td class="text-center py-4 px-4">
								<form th:action="@{/kosar/modosit/{productId}(productId=${item.product.id})}"
											method="post"
											onchange="this.form.submit()"
											class="flex justify-center">
									<input type="number"
												 name="quantity"
												 min="1"
												 th:value="${item.quantity}"
												 class="quantity-input w-20 px-3 py-2 text-center"/>
								</form>
							</td>
							<td class="text-center py-4 px-4">
								<span class="price-tag text-lg font-bold" th:text="${item.totalPrice}">1000</span>
								<span class="text-sm text-gray-500 ml-1">Ft</span>
							</td>
							<td class="text-center py-4 px-4">
								<form th:action="@{/kosar/torol/{productId}(productId=${item.product.id})}"
											method="post"
											style="display:inline;">
									<button type="submit" class="btn btn-sm btn-remove" title="Törlés">
										<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
														d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
										</svg>
									</button>
								</form>
							</td>
						</tr>
						</tbody>
					</table>
				</div>
			</div>

			<div class="lg:hidden space-y-4 mb-8">
				<div th:each="item : ${cart.items}" class="cart-item rounded-xl p-4">
					<div class="flex gap-4">
						<img th:src="@{'/images/products/' + ${item.product.imageFile}}"
								 alt="Termék képe"
								 class="product-image w-20 h-20 object-cover flex-shrink-0"/>

						<div class="flex-1 min-w-0">
							<h3 class="font-medium text-gray-900 mb-2 truncate" th:text="${item.product.name}">Termék neve</h3>

							<div class="grid grid-cols-2 gap-4 text-sm">
								<div>
									<span class="text-gray-600">Egységár:</span>
									<div class="price-tag font-semibold">
										<span th:text="${item.unitPrice}">1000</span> Ft
									</div>
								</div>
								<div>
									<span class="text-gray-600">Összesen:</span>
									<div class="price-tag font-bold">
										<span th:text="${item.totalPrice}">1000</span> Ft
									</div>
								</div>
							</div>

							<div class="flex items-center justify-between mt-4">
								<form th:action="@{/kosar/modosit/{productId}(productId=${item.product.id})}"
											method="post"
											onchange="this.form.submit()"
											class="flex items-center gap-2">
									<label class="text-sm text-gray-600">Mennyiség:</label>
									<input type="number"
												 name="quantity"
												 min="1"
												 th:value="${item.quantity}"
												 class="quantity-input w-16 px-2 py-1 text-center text-sm"/>
								</form>

								<form th:action="@{/kosar/torol/{productId}(productId=${item.product.id})}"
											method="post">
									<button type="submit" class="btn btn-sm btn-remove" title="Törlés">
										<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
														d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
										</svg>
									</button>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="total-summary rounded-xl p-6 mb-8">
				<div class="flex justify-between items-center mb-6">
					<span class="text-xl font-semibold text-gray-800">Végösszeg:</span>
					<div class="text-right">
						<span class="text-3xl font-bold price-tag" th:text="${totalPrice}">0</span>
						<span class="text-lg text-gray-600 ml-2">Ft</span>
					</div>
				</div>
			</div>

			<div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
				<a href="/termekek-oldal" class="btn btn-outline-primary btn-lg">
					<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
					</svg>
					Vissza a termékekhez
				</a>
				<a href="/megrendeles" class="btn btn-primary btn-lg">
					Megrendelés
					<svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
					</svg>
				</a>
			</div>

			<div th:if="${#lists.isEmpty(cart.items)}" class="empty-cart rounded-xl p-12 text-center">
				<div class="max-w-md mx-auto">
					<svg class="w-24 h-24 mx-auto text-gray-300 mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
									d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.293 2.293c-.63.63-.184 1.707.707 1.707H19M7 13v4a2 2 0 002 2h4m-6-2v2a2 2 0 002 2h2m2-4h.01m1.99 0h.01"></path>
					</svg>
					<h3 class="text-2xl font-semibold text-gray-600 mb-4">A kosár üres</h3>
					<p class="text-gray-500 mb-6">Még nem adtál hozzá terméket a kosaradhoz.</p>
					<a href="/termekek-oldal" class="btn btn-primary btn-lg">
						Termékek böngészése
						<svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</div>
</main>

<script>
	document.addEventListener('DOMContentLoaded', function () {
		const quantityInputs = document.querySelectorAll('.quantity-input');

		quantityInputs.forEach(input => {
			input.addEventListener('change', function () {
				this.style.opacity = '0.6';
				this.style.pointerEvents = 'none';
			});
		});
	});
</script>
</body>
</html>